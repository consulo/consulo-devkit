<consulo-plugin>
  <extensions defaultExtensionNs="com.intellij">
    <projectService serviceInterface="org.intellij.grammar.java.JavaHelper"
                    serviceImplementation="org.intellij.grammar.impl.java.PsiJavaHelper"/>
    <!--<debugger.positionManagerFactory implementation="org.intellij.grammar.debugger.BnfPositionManagerFactory"/>-->
  </extensions>

  <extensions defaultExtensionNs="com.intellij">
    <localInspection language="BNF" level="WARNING" groupName="Grammar Inspections" enabledByDefault="true"
                     displayName="Unused rule"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfUnusedRuleInspection"/>
    <localInspection language="BNF" level="WARNING" groupName="Grammar Inspections" enabledByDefault="true"
                     displayName="Unused attribute"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfUnusedAttributeInspection"/>

    <annotator language="BNF" implementationClass="org.intellij.grammar.impl.editor.BnfAnnotator"/>
    <annotator language="BNF" implementationClass="org.intellij.grammar.impl.editor.BnfPinMarkerAnnotator"/>
    <annotator language="BNF" implementationClass="org.intellij.grammar.impl.editor.BnfExpressionMarkerAnnotator"/>
    <lang.commenter language="BNF" implementationClass="org.intellij.grammar.impl.BnfCommenter"/>
    <lang.elementManipulator forClass="org.intellij.grammar.psi.impl.BnfStringLiteralExpressionImpl"
                             implementationClass="org.intellij.grammar.impl.psi.impl.BnfStringManipulator"/>
    <extendWordSelectionHandler implementation="org.intellij.grammar.impl.editor.BnfWordSelectioner"/>

    <!--<psi.referenceContributor implementation="org.intellij.grammar.psi.impl.BnfStringRefContributor" />-->
    <referencesSearch implementation="org.intellij.grammar.psi.BnfAttrPatternRefSearcher"/>
    <lang.refactoringSupport language="BNF" implementationClass="org.intellij.grammar.impl.refactor.BnfRefactoringSupportProvider"/>
    <inlineActionHandler implementation="org.intellij.grammar.impl.refactor.BnfInlineRuleActionHandler"/>
    <lang.namesValidator language="BNF" implementationClass="org.intellij.grammar.impl.refactor.BnfNamesValidator"/>

    <lang.unwrapDescriptor language="BNF" implementationClass="org.intellij.grammar.impl.refactor.BnfUnwrapDescriptor"/>

    <lang.foldingBuilder language="BNF" implementationClass="org.intellij.grammar.impl.BnfFoldingBuilder"/>

    <documentationProvider implementation="org.intellij.grammar.impl.BnfDocumentationProvider"/>

    <localInspection language="BNF" shortName="BnfSuspiciousTokenInspection" displayName="Suspicious token" groupName="Grammar Inspections"
                     enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfSuspiciousTokenInspection"/>
    <localInspection language="BNF" shortName="BnfLeftRecursionInspection" displayName="Left recursion" groupName="Grammar Inspections"
                     enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfLeftRecursionInspection"/>
    <localInspection language="BNF" shortName="BnfDuplicateRuleInspection" displayName="Duplicate rule" groupName="Grammar Inspections"
                     enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfDuplicateRuleInspection"/>
    <localInspection language="BNF" shortName="BnfIdenticalChoiceBranchesInspection" displayName="Identical choice branches"
                     groupName="Grammar Inspections" enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfIdenticalChoiceBranchesInspection"/>
    <localInspection language="BNF" shortName="BnfUnreachableChoiceBranchInspection" displayName="Unreachable choice branch"
                     groupName="Grammar Inspections" enabledByDefault="true" level="WARNING"
                     implementationClass="org.intellij.grammar.impl.inspection.BnfUnreachableChoiceBranchInspection"/>

    <colorSettingsPage implementation="org.intellij.grammar.impl.editor.BnfColorSettingsPage"/>
    <quoteHandler fileType="BNF" className="org.intellij.grammar.impl.editor.BnfQuoteHandler"/>


    <intentionAction>
      <className>org.intellij.grammar.impl.intention.BnfFlipChoiceIntention</className>
      <category>Grammar</category>
    </intentionAction>
  </extensions>

</consulo-plugin>